<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Heisprosjekt - Aksel Vaaler og Andreas Westre: source/emergency_stop_logic.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Heisprosjekt - Aksel Vaaler og Andreas Westre
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">emergency_stop_logic.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>procedure for emergency stop.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="hardware_8h_source.html">hardware.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="door__logic_8h_source.html">door_logic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="floor__sensor__logic_8h_source.html">floor_sensor_logic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="queue__logic_8h_source.html">queue_logic.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for emergency_stop_logic.h:</div>
<div class="dyncontent">
<div class="center"><img src="emergency__stop__logic_8h__incl.png" border="0" usemap="#source_2emergency__stop__logic_8h" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="emergency__stop__logic_8h__dep__incl.png" border="0" usemap="#source_2emergency__stop__logic_8hdep" alt=""/></div>
<!-- MAP 1 -->
</div>
</div>
<p><a href="emergency__stop__logic_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac50823bd7a10d79eb87e38d5d1321e58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="emergency__stop__logic_8h.html#ac50823bd7a10d79eb87e38d5d1321e58">stop_movement_and_set_stop_floor</a> (float *<a class="el" href="floor__sensor__logic_8h.html#a0062fd80d9b82e8d1dc094e48dd67fb3">current_floor_pointer</a>, int *<a class="el" href="queue__logic_8h.html#a1d074b8f2bb239405f636826b2c087c3">end_floor_pointer</a>, int <a class="el" href="queue__logic_8h.html#a4d7deb15e280e9370b8f1b0f14635ac9">current_direction</a>, int <a class="el" href="queue__logic_8h.html#ab0d4cccd67bb6f6991832bdb360c63e7">above_or_below</a>)</td></tr>
<tr class="memdesc:ac50823bd7a10d79eb87e38d5d1321e58"><td class="mdescLeft">&#160;</td><td class="mdescRight">stops elevator movement and sets stop floor to current floor if needed.  <a href="#ac50823bd7a10d79eb87e38d5d1321e58">More...</a><br /></td></tr>
<tr class="separator:ac50823bd7a10d79eb87e38d5d1321e58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a651f1ee3bbd9f5be386676ea78754f34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="emergency__stop__logic_8h.html#a651f1ee3bbd9f5be386676ea78754f34">set_stop_light_and_remove_all_orders</a> (<a class="el" href="structorder__status.html">order_status</a> *<a class="el" href="queue__logic_8h.html#a6e2e72ed5c1d54eb584cf875db3b01eb">order_array</a>)</td></tr>
<tr class="memdesc:a651f1ee3bbd9f5be386676ea78754f34"><td class="mdescLeft">&#160;</td><td class="mdescRight">activates stop light and removes all orders.  <a href="#a651f1ee3bbd9f5be386676ea78754f34">More...</a><br /></td></tr>
<tr class="separator:a651f1ee3bbd9f5be386676ea78754f34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd26ab7772c708e0e4efbe645f78ee5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="emergency__stop__logic_8h.html#a6bd26ab7772c708e0e4efbe645f78ee5">currently_at_floor</a> (int <a class="el" href="queue__logic_8h.html#a4d7deb15e280e9370b8f1b0f14635ac9">current_direction</a>)</td></tr>
<tr class="memdesc:a6bd26ab7772c708e0e4efbe645f78ee5"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks if currently standing still at floor.  <a href="#a6bd26ab7772c708e0e4efbe645f78ee5">More...</a><br /></td></tr>
<tr class="separator:a6bd26ab7772c708e0e4efbe645f78ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8282bf3b476748b2a0215620484cbb8c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="emergency__stop__logic_8h.html#a8282bf3b476748b2a0215620484cbb8c">exit_emergency_stop_mode</a> (<a class="el" href="structorder__status.html">order_status</a> *<a class="el" href="queue__logic_8h.html#a6e2e72ed5c1d54eb584cf875db3b01eb">order_array</a>, float <a class="el" href="floor__sensor__logic_8h.html#a999dc85985ad4dc5c2c10a52c02b2bb4">current_floor</a>, int *<a class="el" href="queue__logic_8h.html#a1d074b8f2bb239405f636826b2c087c3">end_floor_pointer</a>, int *<a class="el" href="queue__logic_8h.html#aa2dcdca19cc14ed1fce8832113f342f1">current_direction_pointer</a>)</td></tr>
<tr class="memdesc:a8282bf3b476748b2a0215620484cbb8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">special procedure for when leaving emergency stop mode while between floors. sets correct direction and movement.  <a href="#a8282bf3b476748b2a0215620484cbb8c">More...</a><br /></td></tr>
<tr class="separator:a8282bf3b476748b2a0215620484cbb8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44ab3d37f9a38e73d0c41c4167b6eca3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="emergency__stop__logic_8h.html#a44ab3d37f9a38e73d0c41c4167b6eca3">emergency_stop_mode</a> (<a class="el" href="structorder__status.html">order_status</a> *<a class="el" href="queue__logic_8h.html#a6e2e72ed5c1d54eb584cf875db3b01eb">order_array</a>, float *<a class="el" href="floor__sensor__logic_8h.html#a0062fd80d9b82e8d1dc094e48dd67fb3">current_floor_pointer</a>, int *<a class="el" href="queue__logic_8h.html#a1d074b8f2bb239405f636826b2c087c3">end_floor_pointer</a>, int *<a class="el" href="queue__logic_8h.html#aa2dcdca19cc14ed1fce8832113f342f1">current_direction_pointer</a>, int <a class="el" href="queue__logic_8h.html#ab0d4cccd67bb6f6991832bdb360c63e7">above_or_below</a>)</td></tr>
<tr class="memdesc:a44ab3d37f9a38e73d0c41c4167b6eca3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when emergency stop button is pressed. stops movement, sets stop light and removes all orders. if elevator standing still at floor, leaves emergency stop mode when stop button is released. if between floors, waits for first new order, then sets correct direction and movement before leaving stop mode.  <a href="#a44ab3d37f9a38e73d0c41c4167b6eca3">More...</a><br /></td></tr>
<tr class="separator:a44ab3d37f9a38e73d0c41c4167b6eca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>procedure for emergency stop. </p>

<p class="definition">Definition in file <a class="el" href="emergency__stop__logic_8h_source.html">emergency_stop_logic.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6bd26ab7772c708e0e4efbe645f78ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd26ab7772c708e0e4efbe645f78ee5">&#9670;&nbsp;</a></span>currently_at_floor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int currently_at_floor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current_direction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checks if currently standing still at floor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_direction</td><td>the current direction of movement. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns 1 if at standstill at floor, 0 otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="emergency__stop__logic_8c_source.html#l00043">43</a> of file <a class="el" href="emergency__stop__logic_8c_source.html">emergency_stop_logic.c</a>.</p>

</div>
</div>
<a id="a44ab3d37f9a38e73d0c41c4167b6eca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44ab3d37f9a38e73d0c41c4167b6eca3">&#9670;&nbsp;</a></span>emergency_stop_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emergency_stop_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structorder__status.html">order_status</a> *&#160;</td>
          <td class="paramname"><em>order_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>current_floor_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>end_floor_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>current_direction_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>above_or_below</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when emergency stop button is pressed. stops movement, sets stop light and removes all orders. if elevator standing still at floor, leaves emergency stop mode when stop button is released. if between floors, waits for first new order, then sets correct direction and movement before leaving stop mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">order_array</td><td>the order array. </td></tr>
    <tr><td class="paramname">current_floor_pointer</td><td>points to current floor. </td></tr>
    <tr><td class="paramname">end_floor_pointer</td><td>points to end floor. </td></tr>
    <tr><td class="paramname">current_direction_pointer</td><td>points to current direction. </td></tr>
    <tr><td class="paramname">above_or_below</td><td>the position relative to current floor. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="emergency__stop__logic_8c_source.html#l00070">70</a> of file <a class="el" href="emergency__stop__logic_8c_source.html">emergency_stop_logic.c</a>.</p>

</div>
</div>
<a id="a8282bf3b476748b2a0215620484cbb8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8282bf3b476748b2a0215620484cbb8c">&#9670;&nbsp;</a></span>exit_emergency_stop_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void exit_emergency_stop_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structorder__status.html">order_status</a> *&#160;</td>
          <td class="paramname"><em>order_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>current_floor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>end_floor_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>current_direction_pointer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>special procedure for when leaving emergency stop mode while between floors. sets correct direction and movement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">order_array</td><td>the order array. </td></tr>
    <tr><td class="paramname">current_floor</td><td>the current floor. </td></tr>
    <tr><td class="paramname">end_floor_pointer</td><td>points to end floor. </td></tr>
    <tr><td class="paramname">current_direction_pointer</td><td>points to current direction. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="emergency__stop__logic_8c_source.html#l00052">52</a> of file <a class="el" href="emergency__stop__logic_8c_source.html">emergency_stop_logic.c</a>.</p>

</div>
</div>
<a id="a651f1ee3bbd9f5be386676ea78754f34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a651f1ee3bbd9f5be386676ea78754f34">&#9670;&nbsp;</a></span>set_stop_light_and_remove_all_orders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_stop_light_and_remove_all_orders </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structorder__status.html">order_status</a> *&#160;</td>
          <td class="paramname"><em>order_array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>activates stop light and removes all orders. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">order_array</td><td>the order array. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="emergency__stop__logic_8c_source.html#l00034">34</a> of file <a class="el" href="emergency__stop__logic_8c_source.html">emergency_stop_logic.c</a>.</p>

</div>
</div>
<a id="ac50823bd7a10d79eb87e38d5d1321e58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac50823bd7a10d79eb87e38d5d1321e58">&#9670;&nbsp;</a></span>stop_movement_and_set_stop_floor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stop_movement_and_set_stop_floor </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>current_floor_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>end_floor_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>above_or_below</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stops elevator movement and sets stop floor to current floor if needed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_floor_pointer</td><td>points to current floor. </td></tr>
    <tr><td class="paramname">end_floor_pointer</td><td>points to end floor. </td></tr>
    <tr><td class="paramname">current_direction</td><td>the current direction of movement. </td></tr>
    <tr><td class="paramname">above_or_below</td><td>the position relative to current floor. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="emergency__stop__logic_8c_source.html#l00010">10</a> of file <a class="el" href="emergency__stop__logic_8c_source.html">emergency_stop_logic.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
